"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[121],{6173:function(t,e,i){i.d(e,{Z:function(){return p}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item br-3",on:{click:function(e){return t.$emit("click")}}},[i("div",{staticClass:"header"},[i("span",{staticClass:"fs-12"},[t._v(t._s(t.name))]),t.toolbar?i("div",{staticClass:"buttons flex-row"},[i("el-button",{staticClass:"button",attrs:{icon:"el-icon-delete",type:"text",size:"mini",circle:"",title:"删除"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}}),i("el-button",{staticClass:"button",attrs:{icon:"el-icon-download",type:"text",size:"mini",circle:"",title:"导出"},on:{click:function(e){return e.stopPropagation(),t.$emit("download")}}})],1):t._e()]),i("div",{staticClass:"body"},[i("div",{staticClass:"detail-div fs-12"},[i("img",{staticClass:"c-avatar br-50p",attrs:{src:t.characterAvatar}}),i("span",[t._v(t._s(t.characterChs))])]),i("div",{staticClass:"detail-div fs-12"},[i("img",{staticClass:"w-avatar br-50p",attrs:{src:t.weaponData.url}}),i("span",[t._v(t._s(t.weaponData.chs))])]),i("div",{staticClass:"detail-div fs-12"},[i("img",{staticClass:"tf-avatar br-50p",attrs:{src:t.tfData.badge}}),i("span",[t._v(t._s(t.tfData.chs))])])])])},a=[],r=i(2371),n=i(2961),l=i(7548),c={name:"PresetItem",props:{item:{type:Object,required:!0},name:{},toolbar:{type:Boolean,default:!0}},computed:{characterName(){return this.item.character.name},characterAvatar(){const t=r.O[this.characterName];return t.avatar},characterChs(){const t=r.O[this.characterName];return t.chs},weaponData(){return n.G[this.item.weapon.name]},tfData(){return l.F[this.item.targetFunction.name]}}},o=c,u=i(1001),m=(0,u.Z)(o,s,a,!1,null,"49ba95be",null),p=m.exports},4424:function(t,e,i){i.r(e),i.d(e,{default:function(){return S}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-drawer",{attrs:{title:"面板",visible:t.showAttributeDrawer,size:t.deviceIsPC?"30%":"100%"},on:{"update:visible":function(e){t.showAttributeDrawer=e}}},[t.wasmAttribute?[i("div",{staticStyle:{padding:"0 20px"}},[i("attribute-panel",{attrs:{attribute:t.wasmAttribute}})],1)]:[i("el-empty",[t._v("In theory, in should not see this")])]],2),i("el-row",{attrs:{gutter:16}},[i("el-col",{staticClass:"mona-scroll-hidden left",attrs:{md:6,sm:24}},[i("div",{staticStyle:{"margin-bottom":"12px"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-cpu"},on:{click:t.handleClickStart}},[t._v("开始计算")]),i("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:t.handleClickAddMember}},[t._v("添加成员")])],1),t._l(t.presetNames,(function(e,s){return i("div",{key:s,staticClass:"member-item"},[i("div",{staticClass:"member-header",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("p",{staticClass:"team-title"},[t._v("成员"+t._s(s+1))]),i("div",[i("el-button",{staticStyle:{color:"white"},attrs:{circle:"",size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(e){return t.handleDeleteMember(s)}}})],1)]),i("p",{staticClass:"common-title2"},[t._v("计算预设")]),i("select-preset",{model:{value:t.presetNames[s],callback:function(e){t.$set(t.presetNames,s,e)},expression:"presetNames[index]"}}),i("p",{staticClass:"common-title2"},[t._v("权重")]),i("el-slider",{staticStyle:{"padding-left":"8px"},attrs:{min:0,max:1,step:.01,"show-input":!0},model:{value:t.weights[s],callback:function(e){t.$set(t.weights,s,e)},expression:"weights[index]"}})],1)}))],2),i("el-col",{staticClass:"mona-scroll-hidden right",attrs:{md:18,sm:24}},[t.currentResultEntry?[i("el-input-number",{staticStyle:{"margin-bottom":"12px"},attrs:{value:t.resultIndex+1,min:1,max:t.results.length,size:"small"},on:{input:t.handleChangeResultIndex}}),t._l(t.currentResultEntry,(function(e,s){return i("div",{key:s,staticClass:"result-item"},[i("div",{staticClass:"result-item-top"},[i("div",[i("el-button",{attrs:{icon:"el-icon-s-data",circle:"",size:"mini",type:"text",title:"查看面板"},on:{click:function(e){return t.handleClickDisplayAttributePanel(s)}}})],1),i("div",{staticClass:"result-item-buttons"})]),i("div",{staticClass:"result-item-content"},t._l(t.currentResultEntry[s],(function(e){return i("artifact-display",{key:e,attrs:{item:t.artifactsById[e],buttons:!0,"lock-button":!0,"delete-button":!1,"edit-button":!1},on:{toggle:function(i){return t.handleToggleArtifact(e)}}})})),1)])}))]:[i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("el-empty")],1)]],2)],1)],1)},a=[],r=(i(3948),i(6294)),n=i(6436),l=i(5648),c=i(1580),o=i(9849),u=i(8722),m=i(3828),p=i(3583),h=i(7547),d=i(2579),b=i(9552),f=i(6173),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-select",{attrs:{size:"small",value:t.value},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.list,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)},g=[],_={name:"SelectPreset",props:["value"],computed:{...(0,r.mapGetters)("presets",["allFlat"]),list(){let t=[];for(let e of this.allFlat)t.push(e.name);return t}}},y=_,C=i(1001),w=(0,C.Z)(y,v,g,!1,null,"0cfb48b7",null),x=w.exports,k=i(7656),A={name:"TeamOptimizationPage",components:{SelectCharacter:m.Z,SelectWeapon:p.Z,ItemConfig:h.Z,ArtifactDisplay:d.Z,MyButton1:b.Z,PresetItem:f.Z,SelectPreset:x,AttributePanel:k.Z},data(){return{results:[],resultIndex:0,presetNames:[null],weights:[],showAttributeDrawer:!1,wasmAttribute:null,deviceIsPC:u.B}},methods:{handleClickAddMember(){8!==this.presetNames.length?(this.presetNames.push(null),this.weights.push(0)):this.$message.error("最多支持8个成员")},handleDeleteMember(t){1!==this.presetNames.length&&(this.$delete(this.presetNames,t),this.$delete(this.weights,t))},handleClickStart(){const t=this.presets.length===this.presetNames.length;if(!t)return void this.$message.error("请选择计算预设");const e=this.optimizeTeamWasmInterface,i=this.filteredArtifactsWasm,s=this.$loading({lock:!0,text:"莫娜占卜中（可能需要数分钟）"});(0,l.YK)(e,i).then((t=>{this.results=t.artifacts,this.resultIndex=0})).catch((t=>{console.log(t)})).finally((()=>{s.close()}))},handleChangeResultIndex(t){this.resultIndex=t-1},handleClickDisplayAttributePanel:async function(t){const e=this.wasmGetAttributeInterface(t),i=await(0,l.le)(e);this.wasmAttribute=i,this.showAttributeDrawer=!0},wasmGetAttributeInterface(t){let e=[];if(this.currentResultEntry){const i=Object.values(this.currentResultEntry[t]),s=i.map((t=>this.artifactsById[t])).filter((t=>t));e=s.map((t=>(0,n.Lz)(t)))}return{character:this.presets[t].item.character,weapon:this.presets[t].item.weapon,buffs:this.presets[t].item.buffs,artifacts:e}},handleClickSaveAsKumi(t){let e=[];if(this.currentResultEntry){const i=Object.values(this.currentResultEntry[t]);e=i.map((t=>this.artifactsById[t])).filter((t=>t))}},handleToggleArtifact(t){(0,o.kY)(t)}},computed:{...(0,r.mapGetters)("artifacts",{artifactsFlat:"allFlat",artifactsById:"artifactsById"}),singleInterfaces(){return this.presets.map((t=>(0,c.DR)(t.item)))},currentResultEntry(){return 0===this.results.length?null:this.results[this.resultIndex]},filteredArtifacts(){let t=[];for(let e of this.artifactsFlat)e.level>=16&&t.push(e);return t.filter((t=>!t.omit))},filteredArtifactsWasm(){return this.filteredArtifacts.map(n.Lz)},presets(){let t=[];for(let e of this.presetNames)e&&t.push((0,c.kE)(e));return t},optimizeTeamHyperParamInterface(){return{mva_step:5,work_space:1e3,max_re_optimize:5,max_search:1e6,count:1e3}},optimizeTeamWasmInterface(){return{single_interfaces:this.singleInterfaces,weights:this.weights,hyper_param:this.optimizeTeamHyperParamInterface}}}},I=A,P=(0,C.Z)(I,s,a,!1,null,"26826020",null),S=P.exports},7656:function(t,e,i){i.d(e,{Z:function(){return C}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",{staticClass:"class"},[t._v("基础属性")]),i("attribute-item",{attrs:{title:"生命值",composition:t.attribute.hp}}),i("attribute-item",{attrs:{title:"攻击力",composition:t.attribute.atk}}),i("attribute-item",{attrs:{title:"防御力",composition:t.attribute.def}}),i("attribute-item",{attrs:{title:"元素精通",composition:t.attribute.elemental_mastery}}),i("h3",{staticClass:"class"},[t._v("进阶属性")]),i("attribute-item",{attrs:{title:"暴击率",composition:t.attribute.critical,percentage:!0}}),i("attribute-item",{attrs:{title:"暴击伤害",composition:t.attribute.critical_damage,percentage:!0}}),i("attribute-item",{attrs:{title:"治疗加成",composition:t.attribute.healing_bonus,percentage:!0}}),i("attribute-item",{attrs:{title:"元素充能效率",composition:t.attribute.recharge,percentage:!0}}),i("attribute-item",{attrs:{title:"护盾强效",composition:t.attribute.shield_strength,percentage:!0}}),i("h3",{staticClass:"class"},[t._v("元素属性")]),i("attribute-item",{attrs:{title:"火元素伤害加成",composition:t.attribute.bonus_pyro,percentage:!0}}),i("attribute-item",{attrs:{title:"水元素伤害加成",composition:t.attribute.bonus_hydro,percentage:!0}}),i("attribute-item",{attrs:{title:"草元素伤害加成",composition:t.attribute.bonus_dendro,percentage:!0}}),i("attribute-item",{attrs:{title:"雷元素伤害加成",composition:t.attribute.bonus_electro,percentage:!0}}),i("attribute-item",{attrs:{title:"风元素伤害加成",composition:t.attribute.bonus_anemo,percentage:!0}}),i("attribute-item",{attrs:{title:"冰元素伤害加成",composition:t.attribute.bonus_cryo,percentage:!0}}),i("attribute-item",{attrs:{title:"岩元素伤害加成",composition:t.attribute.bonus_geo,percentage:!0}}),i("attribute-item",{attrs:{title:"物理伤害加成",composition:t.attribute.bonus_physical,percentage:!0}})],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"attribute-item"},[i("el-tooltip",[i("span",{staticClass:"title"},[t._v(t._s(t.title))]),i("div",{attrs:{slot:"content"},slot:"content"},[i("attribute-composition",{attrs:{composition:t.composition}})],1)]),i("span",{staticClass:"value"},[t._v(t._s(t.displayValue))])],1)},n=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.list.length>0?t._l(t.list,(function(e){return i("div",{key:e.name,staticClass:"item"},[i("span",[t._v(t._s(e.name))]),i("span",[t._v(t._s(e.value.toFixed(3)))])])})):i("div",{staticClass:"no-item",staticStyle:{padding:"8px"}},[t._v(" 无加成 ")])],2)},c=[],o=(i(2707),{name:"AttributeComposition",props:["composition"],computed:{list(){let t=[];for(const e in this.composition)t.push({name:e,value:this.composition[e]});return t.sort(((t,e)=>t.name.localeCompare(e.name))),t}}}),u=o,m=i(1001),p=(0,m.Z)(u,l,c,!1,null,"a1776db8",null),h=p.exports,d={name:"AttributeItem",components:{AttributeComposition:h},props:{composition:{},title:{},percentage:{default:!1}},computed:{sum(){let t=0;for(const e in this.composition)t+=this.composition[e];return t},displayValue(){return this.percentage?`${(100*this.sum).toFixed(1)}%`:Math.round(this.sum)}}},b=d,f=(0,m.Z)(b,r,n,!1,null,"4722bde2",null),v=f.exports,g={name:"AttributePanel",components:{AttributeItem:v},props:{attribute:{type:Object}},methods:{mul100(t){return(100*this.attribute[t]).toFixed(1)+"%"}},computed:{attack(){let t=this.attribute;return t.attackStatic+t.attackBasic+t.attackPercentage},defend(){let t=this.attribute;return t.defendStatic+t.defendBasic+t.defendPercentage},life(){let t=this.attribute;return t.lifeStatic+t.lifeBasic+t.lifePercentage}}},_=g,y=(0,m.Z)(_,s,a,!1,null,"5afce8a2",null),C=y.exports}}]);