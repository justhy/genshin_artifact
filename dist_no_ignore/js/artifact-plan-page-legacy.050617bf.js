"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[136],{5956:function(t,e,a){a.r(e),a.d(e,{default:function(){return Tt}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"选择圣遗物",width:t.deviceIsPC?"80%":"90%",visible:t.showSelectArtifactDialog},on:{"update:visible":function(e){t.showSelectArtifactDialog=e}}},[a("select-artifact",{attrs:{position:t.selectArtifactSlot},on:{select:t.handleSelectArtifact}})],1),a("el-dialog",{attrs:{visible:t.showDamageAnalysisDialog,title:"伤害构成",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showDamageAnalysisDialog=e}}},[a("damage-analysis",{ref:"damageAnalysis",attrs:{"enemy-config":t.enemyConfig,"character-level":t.characterLevelNumber}})],1),a("el-dialog",{attrs:{visible:t.showSelectBuffDialog,title:"选择BUFF",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showSelectBuffDialog=e}}},[a("select-buff",{on:{select:t.handleSelectBuff}})],1),a("el-dialog",{attrs:{visible:t.showConstraintDialog,title:"计算设置",width:t.deviceIsPC?"400px":"90%"},on:{"update:visible":function(e){t.showConstraintDialog=e}}},[a("p",{staticClass:"common-title2"},[t._v(" 算法 "),a("el-tooltip",{scopedSlots:t._u([{key:"content",fn:function(){return[t._v(" A*：推荐"),a("br"),t._v(" 启发式剪枝：不保证得到最优解，但是速度快"),a("br"),t._v(" 纯枚举：不推荐 ")]},proxy:!0}])},[a("i",{staticClass:"el-icon-question",attrs:{content:""}})])],1),"Naive"===t.algorithm?a("el-alert",{staticStyle:{"margin-bottom":"12px"},attrs:{title:"请限定套装或者主词条，否则计算将十分耗时，可能导致计算超时",type:"warning"}}):t._e(),a("el-radio-group",{model:{value:t.algorithm,callback:function(e){t.algorithm=e},expression:"algorithm"}},[a("el-radio",{attrs:{label:"AStar"}},[t._v("A*")]),a("el-radio",{attrs:{label:"Heuristic"}},[t._v("启发式剪枝")]),a("el-radio",{attrs:{label:"Naive"}},[t._v("纯枚举")])],1),a("p",{staticClass:"common-title2"},[t._v("限定套装")]),a("div",{staticStyle:{"margin-top":"12px","margin-bottom":"12px"}},[a("select-artifact-set",{style:{width:"100%"},attrs:{multiple:"",placeholder:"限定套装"},model:{value:t.constraintArtifactSet,callback:function(e){t.constraintArtifactSet=e},expression:"constraintArtifactSet"}})],1),a("p",{staticClass:"common-title2"},[t._v("限定主词条")]),a("div",{staticStyle:{"margin-top":"12px","margin-bottom":"12px"}},[a("div",{staticClass:"constraint-main-stat-item"},[a("span",[t._v("时之沙")]),a("select-artifact-main-stat",{style:{width:"calc(100% - 48px)"},attrs:{"include-any":!1,multiple:!0,position:"sand",placeholder:"限定主词条"},model:{value:t.constraintSandMainStats,callback:function(e){t.constraintSandMainStats=e},expression:"constraintSandMainStats"}})],1),a("div",{staticClass:"constraint-main-stat-item"},[a("span",[t._v("空之杯")]),a("select-artifact-main-stat",{style:{width:"calc(100% - 48px)"},attrs:{"include-any":!1,multiple:!0,position:"cup",placeholder:"限定主词条"},model:{value:t.constraintGobletMainStats,callback:function(e){t.constraintGobletMainStats=e},expression:"constraintGobletMainStats"}})],1),a("div",{staticClass:"constraint-main-stat-item"},[a("span",[t._v("理之冠")]),a("select-artifact-main-stat",{style:{width:"calc(100% - 48px)"},attrs:{"include-any":!1,multiple:!0,position:"head",placeholder:"限定主词条"},model:{value:t.constraintHeadMainStats,callback:function(e){t.constraintHeadMainStats=e},expression:"constraintHeadMainStats"}})],1)]),a("p",{staticClass:"constraint-title"},[t._v("限定最小值")]),a("div",[a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("元素充能效率")]),a("div",{staticClass:"slider-div"},[a("el-slider",{attrs:{min:1,max:4,step:.05,"show-input":t.deviceIsPC},model:{value:t.constraintMinRecharge,callback:function(e){t.constraintMinRecharge=e},expression:"constraintMinRecharge"}})],1)]),a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("元素精通")]),a("div",{staticClass:"slider-div"},[a("el-slider",{attrs:{min:0,max:2e3,step:10,"show-input":t.deviceIsPC},model:{value:t.constraintMinElementalMastery,callback:function(e){t.constraintMinElementalMastery=e},expression:"constraintMinElementalMastery"}})],1)]),a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("暴击率")]),a("div",{staticClass:"slider-div"},[a("el-slider",{attrs:{min:0,max:1,step:.01,"show-input":t.deviceIsPC},model:{value:t.constraintMinCritical,callback:function(e){t.constraintMinCritical=e},expression:"constraintMinCritical"}})],1)]),a("div",{staticClass:"constraint-min-item"},[a("span",{staticClass:"constraint-min-title"},[t._v("暴击伤害")]),a("div",{staticClass:"slider-div"},[a("el-slider",{attrs:{min:0,max:4,step:.1,"show-input":t.deviceIsPC},model:{value:t.constraintMinCriticalDamage,callback:function(e){t.constraintMinCriticalDamage=e},expression:"constraintMinCriticalDamage"}})],1)])]),a("p",{staticClass:"common-title2"},[t._v("过滤圣遗物组")]),a("div",{staticClass:"mona-scroll",staticStyle:{"max-height":"50vh",overflow:"auto"}},[a("el-tree",{ref:"filterKumiRef",attrs:{data:t.kumiTreeDataForElementUI,"show-checkbox":""}})],1)],1),a("el-dialog",{attrs:{visible:t.showArtifactAnalysisDialog,title:"圣遗物分析",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showArtifactAnalysisDialog=e}}},[a("artifacts-set-statistics",{attrs:{"artifact-ids":t.artifactIds}})],1),a("el-dialog",{attrs:{visible:t.showArtifactPerBonusDialog,title:"词条收益曲线",width:t.deviceIsPC?"80%":"90%"},on:{"update:visible":function(e){t.showArtifactPerBonusDialog=e}}},[a("artifact-per-stat-bonus",{attrs:{data:t.miscPerStatBonus}})],1),a("el-dialog",{attrs:{visible:t.showSaveKumiDialog,title:"新建圣遗物组",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showSaveKumiDialog=e}}},[a("save-as-kumi",{attrs:{"default-name":t.kumiDefaultName},on:{confirm:t.handleSaveAsKumi}})],1),a("el-dialog",{attrs:{visible:t.showUseKumiDialog,title:"选择圣遗物组",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showUseKumiDialog=e}}},[a("div",{staticClass:"mona-scroll",staticStyle:{height:"60vh"}},[a("el-tree",{attrs:{data:t.kumiTreeDataForElementUI},on:{"node-click":t.handleUseKumi}})],1)]),a("el-dialog",{attrs:{visible:t.showEnemyConfigDialog,title:"敌人设置",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showEnemyConfigDialog=e}}},[a("enemy-config",{model:{value:t.enemyConfig,callback:function(e){t.enemyConfig=e},expression:"enemyConfig"}})],1),a("el-dialog",{attrs:{visible:t.showConfigArtifactDialog,title:"圣遗物设置",width:t.deviceIsPC?"60%":"90%"},on:{"update:visible":function(e){t.showConfigArtifactDialog=e}}},[a("h3",{staticClass:"common-title2"},[t._v("圣遗物特效模式")]),a("el-radio-group",{model:{value:t.artifactEffectMode,callback:function(e){t.artifactEffectMode=e},expression:"artifactEffectMode"}},[a("el-radio",{attrs:{label:"auto"}},[t._v("自动")]),a("el-radio",{attrs:{label:"custom"}},[t._v("手动")])],1),a("h3",{staticClass:"common-title2"},[t._v("圣遗物特效（仅在手动模式下有效）")]),a("artifact-config",{model:{value:t.artifactConfig,callback:function(e){t.artifactConfig=e},expression:"artifactConfig"}})],1),a("el-row",{ref:"bigContainer",staticClass:"big-container"},[a("el-col",{staticClass:"left-container mona-scroll-hidden",attrs:{sm:24,md:6}},[a("div",{staticClass:"config-character"},[a("img",{staticClass:"character-splash",attrs:{src:t.characterSplash}}),a("div",{staticClass:"select-character"},[a("p",{staticClass:"common-title"},[t._v("角色")]),a("div",{staticStyle:{display:"flex",gap:"12px"}},[a("select-character",{staticStyle:{flex:"1"},model:{value:t.characterName,callback:function(e){t.characterName=e},expression:"characterName"}}),a("select-character-level",{staticStyle:{flex:"1"},model:{value:t.characterLevel,callback:function(e){t.characterLevel=e},expression:"characterLevel"}})],1),a("div",{staticClass:"config-character-skill"},[a("h3",{staticClass:"common-title2"},[t._v("技能")]),a("div",{staticClass:"skill-div"},[a("el-input-number",{staticStyle:{flex:"1",display:"block",width:"unset"},attrs:{size:"mini","controls-position":"right",min:1,max:15},model:{value:t.characterSkill1,callback:function(e){t.characterSkill1=e},expression:"characterSkill1"}}),a("el-input-number",{staticStyle:{flex:"1",display:"block",width:"unset"},attrs:{size:"mini","controls-position":"right",min:1,max:15},model:{value:t.characterSkill2,callback:function(e){t.characterSkill2=e},expression:"characterSkill2"}}),a("el-input-number",{staticStyle:{flex:"1",display:"block",width:"unset"},attrs:{size:"mini","controls-position":"right",min:1,max:15},model:{value:t.characterSkill3,callback:function(e){t.characterSkill3=e},expression:"characterSkill3"}})],1)]),a("div",{staticClass:"config-character-constellation"},[a("h3",{staticClass:"common-title2"},[t._v("命之座")]),a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,max:6},model:{value:t.characterConstellation,callback:function(e){t.characterConstellation=e},expression:"characterConstellation"}})],1),t.characterNeedConfig?a("div",{staticClass:"character-extra-config"},[a("item-config",{attrs:{"item-name":t.characterName,configs:t.characterConfigConfig},model:{value:t.characterConfig,callback:function(e){t.characterConfig=e},expression:"characterConfig"}})],1):t._e()])]),a("el-divider"),a("div",{staticClass:"config-weapon"},[a("div",{staticClass:"select-weapon"},[a("p",{staticClass:"common-title"},[t._v("武器")]),a("div",{staticStyle:{display:"flex",gap:"12px","margin-bottom":"8px"}},[a("select-weapon",{staticStyle:{flex:"1"},attrs:{type:t.characterWeaponType},model:{value:t.weaponName,callback:function(e){t.weaponName=e},expression:"weaponName"}}),a("select-weapon-level",{staticStyle:{flex:"1"},model:{value:t.weaponLevel,callback:function(e){t.weaponLevel=e},expression:"weaponLevel"}})],1),a("weapon-display",{attrs:{"weapon-name":t.weaponName}}),a("div",{staticClass:"config-weapon-refine"},[a("h3",{staticClass:"common-title2"},[t._v("精炼")]),a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:5},model:{value:t.weaponRefine,callback:function(e){t.weaponRefine=e},expression:"weaponRefine"}})],1),t.weaponNeedConfig?a("div",{staticClass:"weapon-extra-config"},[a("item-config",{attrs:{"item-name":t.weaponName,configs:t.weaponConfigConfig},model:{value:t.weaponConfig,callback:function(e){t.weaponConfig=e},expression:"weaponConfig"}})],1):t._e()],1)]),a("el-divider"),a("div",{staticClass:"config-target-function"},[a("p",{staticClass:"common-title"},[t._v("目标函数")]),a("div",{staticClass:"my-button-list",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-caret-right"},on:{click:t.handleOptimizeArtifact}},[t._v("开始计算")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-s-tools",type:"text"},on:{click:t.handleClickSetupOptimization}},[t._v("计算设置")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-s-help",type:"text"},on:{click:t.handleClickArtifactConfig}},[t._v("圣遗物设置")])],1),a("div",{staticClass:"my-button-list",staticStyle:{"margin-bottom":"12px"}},[a("el-dropdown",{attrs:{trigger:"click",size:"small","split-button":""},on:{command:t.handleCommandPreset,click:function(e){return t.handleSavePreset(t.miscCurrentPresetName)}},scopedSlots:t._u([{key:"dropdown",fn:function(){return[a("el-dropdown-menu",[t.miscCurrentPresetName?a("el-dropdown-item",{attrs:{icon:"el-icon-s-tools",command:"save-preset"}},[t._v("另存为预设")]):t._e(),t._l(t.presetsAllFlat,(function(e,i){return a("el-dropdown-item",{key:e.name,attrs:{divided:0===i&&t.miscCurrentPresetName,icon:"el-icon-menu",command:"apply-"+e.name}},[t._v(t._s(e.name))])}))],2)]},proxy:!0}])},[t.miscCurrentPresetName?[t._v("保存预设「"+t._s(t.miscCurrentPresetName)+"」")]:[t._v("新建预设")]],2)],1),a("el-tabs",{model:{value:t.miscTargetFunctionTab,callback:function(e){t.miscTargetFunctionTab=e},expression:"miscTargetFunctionTab"}},[a("el-tab-pane",{attrs:{label:"普通",name:"normal"}},[a("select-target-function",{attrs:{"character-name":t.characterName},model:{value:t.targetFunctionName,callback:function(e){t.targetFunctionName=e},expression:"targetFunctionName"}}),t.targetFunctionNeedConfig?a("div",{staticClass:"target-function-config",staticStyle:{"margin-top":"12px"}},[a("item-config",{attrs:{"item-name":t.targetFunctionName,configs:t.targetFunctionConfigConfig},model:{value:t.targetFunctionConfig,callback:function(e){t.targetFunctionConfig=e},expression:"targetFunctionConfig"}})],1):t._e(),a("div",{staticClass:"target-function-detail"},[a("div",{staticClass:"detail-left"},[a("img",{attrs:{src:t.targetFunctionBadge}})]),a("div",{staticClass:"detail-right"},[a("p",{staticClass:"target-function-description",domProps:{innerHTML:t._s(t.targetFunctionDescription)}})])])],1),a("el-tab-pane",{attrs:{label:"MONA-DSL",name:"dsl"}},[a("el-alert",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"warning",title:"该功能为测试版",closable:!1}}),a("el-input",{staticClass:"code-input",attrs:{type:"textarea",rows:10,placeholder:"代码"},model:{value:t.targetFunctionDSLSource,callback:function(e){t.targetFunctionDSLSource=e},expression:"targetFunctionDSLSource"}})],1)],1),t.optimizationResults.length>0?a("div",{staticStyle:{"margin-top":"12px"}},[a("el-alert",{staticStyle:{"margin-bottom":"12px"},attrs:{title:"共计算"+t.optimizationResults.length+"组圣遗物搭配",type:"success"}}),a("el-input-number",{staticStyle:{width:"100%"},attrs:{value:t.optimizationResultIndex,min:1,max:t.optimizationResults.length,size:"small"},on:{input:t.handleUseNthOptimizationResult}}),a("value-display",{staticStyle:{"margin-top":"12px"},attrs:{value:t.optimizationResults[t.optimizationResultIndex-1].ratio,extra:t.optimizationResults[t.optimizationResultIndex-1].value.toFixed(1)}})],1):t._e()],1),a("el-divider"),a("div",{staticClass:"config-buff"},[a("p",{staticClass:"common-title"},[t._v("BUFF")]),a("div",{staticClass:"buff-tool",staticStyle:{"margin-bottom":"12px"}},[a("my-button-1",{attrs:{icon:"el-icon-plus",title:"添加BUFF"},on:{click:t.handleClickAddBuff}})],1),t.buffs.length>0?a("div",{staticClass:"buffs"},t._l(t.buffs,(function(e){return a("buff-item",{key:e.id,attrs:{buff:e,"buff-config":e.config},on:{"update:buffConfig":function(a){return t.$set(e,"config",a)},"update:buff-config":function(a){return t.$set(e,"config",a)},delete:function(a){return t.handleClickDeleteBuff(e.id)},toggle:function(a){return t.handleClickToggleBuff(e.id)}}})})),1):a("div",[a("el-empty",{attrs:{description:"无BUFF"}})],1)])],1),a("el-col",{staticClass:"middle-container mona-scroll-hidden",attrs:{sm:24,md:12}},[a("p",{staticClass:"common-title"},[t._v("圣遗物")]),a("div",{staticClass:"artifact-tool",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:t.handleClickArtifactAnalysis}},[t._v("词条分析")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-star-on"},on:{click:t.handleClickSaveAsKumi}},[t._v("存为套装")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-folder"},on:{click:t.handleClickUseKumi}},[t._v("应用套装")])],1),a("div",{staticClass:"artifacts"},t._l(t.artifactIds,(function(e,i){return a("div",{key:i,staticClass:"artifact-item-or-button"},[t.artifactItems[i]?a("artifact-display",{staticClass:"artifact-display",attrs:{item:t.artifactItems[i],selectable:"",buttons:!0,"delete-button":!0},on:{delete:function(e){return t.handleRemoveArtifact(i)},toggle:function(a){return t.handleToggleArtifact(e)},click:function(e){return t.handleGotoSelectArtifact(i)}}}):a("add-button",{staticClass:"add-button",on:{click:function(e){return t.handleGotoSelectArtifact(i)}}})],1)})),0),t.artifactNeedConfig4?a("div",{staticStyle:{"margin-top":"16px"}},[a("p",{staticClass:"common-description"},[a("span",{staticClass:"effect4"},[t._v("四件套效果：")]),a("span",{domProps:{innerHTML:t._s(t.artifactEffect4Text)}})]),a("item-config",{attrs:{"item-name":t.artifactConfig4ItemName,configs:t.artifactConfig4Configs},model:{value:t.artifactSingleConfig,callback:function(e){t.artifactSingleConfig=e},expression:"artifactSingleConfig"}})],1):t._e(),a("el-divider"),a("p",{staticClass:"common-title"},[t._v("伤害计算")]),a("div",{staticClass:"my-button-list",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:t.handleDisplayAnalysis}},[t._v("明细")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-s-tools"},on:{click:t.handleClickEnemyConfig}},[t._v("敌人设置")])],1),t.characterNeedSkillConfig?a("div",{staticStyle:{"margin-bottom":"16px"}},[a("item-config",{attrs:{"item-name":t.characterName,configs:t.characterSkillConfigConfig},model:{value:t.characterSkillConfig,callback:function(e){t.characterSkillConfig=e},expression:"characterSkillConfig"}})],1):t._e(),a("div",{staticClass:"damage-analysis-div"},[a("select-character-skill",{staticStyle:{"margin-bottom":"16px"},attrs:{"character-name":t.characterName},model:{value:t.characterSkillIndex,callback:function(e){t.characterSkillIndex=e},expression:"characterSkillIndex"}}),a("damage-panel",{attrs:{"analysis-from-wasm":t.characterDamageAnalysis}})],1),a("h3",{staticClass:"common-title2",staticStyle:{"margin-top":"24px"}},[t._v("剧变反应伤害")]),a("transformative-damage",{attrs:{data:t.characterTransformativeDamage}})],1),a("el-col",{staticClass:"right-container mona-scroll-hidden",attrs:{sm:24,md:6}},[a("div",{staticClass:"common-title"},[t._v("面板")]),a("div",{staticClass:"my-button-list",staticStyle:{"margin-bottom":"12px"}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:t.handleClickAttributeAnalysis}},[t._v("词条收益")])],1),a("attribute-panel",{attrs:{attribute:t.attributeFromWasm}})],1)],1)],1)},n=[],s=a(6969),r=(a(3948),a(1817),a(6294)),l=a(6436),o=a(9849),c=a(2432),u=a(9024),f=a(1580),m=a(2371),h=a(2961),d=a(7548),p=a(5529),g=a(1809),v=a(5648),C=a(8140),b=a(2347),S=a(8722),k=a(7843),y=a(5045),_=a(3828),w=a(5623),x=a(3583),A=a(9893),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,placeholder:"目标函数",size:"small"},on:{input:function(e){return t.$emit("input",e)}}},[t.characterTargetFunctionList&&t.characterTargetFunctionList.length>0?a("el-option-group",{attrs:{label:"角色专属"}},t._l(t.characterTargetFunctionList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"option-root"},[a("img",{staticClass:"option-badge",attrs:{src:e.badge}}),a("div",{staticClass:"option-body"},[a("p",{staticClass:"option-title"},[t._v(t._s(e.chs))])])])])})),1):t._e(),t.commonTargetFunctionList?a("el-option-group",{attrs:{label:"通用"}},t._l(t.commonTargetFunctionList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.chs,value:e.name}},[a("div",{staticClass:"option-root"},[a("img",{staticClass:"option-badge",attrs:{src:e.badge}}),a("div",{staticClass:"option-body"},[a("p",{staticClass:"option-title"},[t._v(t._s(e.chs))])])])])})),1):t._e()],1)},N=[],F={name:"SelectTargetFunction",props:{value:{},characterName:{default:"Amber"}},created(){this.commonTargetFunctionList=d.e.common},computed:{characterTargetFunctionList(){var t;return null!==(t=d.e[this.characterName])&&void 0!==t?t:[]}},watch:{characterName:function(t,e){const a=d.e[t];a&&a.length>0?this.$emit("input",a[0].name):this.$emit("input",this.commonTargetFunctionList[0].name)}}},D=F,M=a(1001),$=(0,M.Z)(D,I,N,!1,null,"33cc4e3c",null),P=$.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.value,size:"small"},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.skillMap,(function(e,i){return a("el-option-group",{key:i,attrs:{label:i}},t._l(e,(function(t){return a("el-option",{key:t.index,attrs:{label:t.chs,value:t.index}})})),1)})),1)},B=[],E={name:"SelectCharacterSkill",props:["characterName","value"],computed:{skillMap(){const t=m.O[this.characterName];let e={};return t.skillMap1.length>0&&(e[t.skillName1]=t.skillMap1),t.skillMap2.length>0&&(e[t.skillName2]=t.skillMap2),t.skillMap3.length>0&&(e[t.skillName3]=t.skillMap3),e}},watch:{characterName:function(t,e){this.$emit("input",0)}}},T=E,Z=(0,M.Z)(T,z,B,!1,null,null,null),L=Z.exports,O=a(6571),W=a(2579),R=a(8498),K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{attrs:{data:t.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"name",label:"类型"}}),a("el-table-column",{attrs:{prop:"expectation",label:"期望伤害"}}),a("el-table-column",{attrs:{prop:"critical",label:"暴击伤害"}}),a("el-table-column",{attrs:{prop:"nonCritical",label:"非暴击伤害"}})],1)],1)},U=[],G={name:"DamageList",props:{analysisFromWasm:{}},data(){return{showDialog:!1}},methods:{},computed:{element(){return this.analysisFromWasm.element},normalDamageTitle(){if(this.analysisFromWasm.is_heal)return"治疗";{const t={Pyro:"火元素伤害",Hydro:"水元素伤害",Electro:"雷元素伤害",Cryo:"冰元素伤害",Dendro:"草元素伤害",Geo:"岩元素伤害",Anemo:"风元素伤害",Physical:"物理伤害"};return t[this.element]}},tableData(){var t,e,a,i,n,s;let r=[];const l="无数据",o=t=>Math.round(t);var c,u,f,m,h,d,p,g,v,C,b,S;(r.push({expectation:null!==(t=o(null===(e=this.analysisFromWasm.normal)||void 0===e?void 0:e.expectation))&&void 0!==t?t:l,critical:null!==(a=o(null===(i=this.analysisFromWasm.normal)||void 0===i?void 0:i.critical))&&void 0!==a?a:l,nonCritical:null!==(n=o(null===(s=this.analysisFromWasm.normal)||void 0===s?void 0:s.non_critical))&&void 0!==n?n:l,name:this.normalDamageTitle}),this.analysisFromWasm.melt)&&r.push({expectation:null!==(c=o(null===(u=this.analysisFromWasm.melt)||void 0===u?void 0:u.expectation))&&void 0!==c?c:l,critical:null!==(f=o(null===(m=this.analysisFromWasm.melt)||void 0===m?void 0:m.critical))&&void 0!==f?f:l,nonCritical:null!==(h=o(null===(d=this.analysisFromWasm.melt)||void 0===d?void 0:d.non_critical))&&void 0!==h?h:l,name:"融化"});this.analysisFromWasm.vaporize&&r.push({expectation:null!==(p=o(null===(g=this.analysisFromWasm.vaporize)||void 0===g?void 0:g.expectation))&&void 0!==p?p:l,critical:null!==(v=o(null===(C=this.analysisFromWasm.vaporize)||void 0===C?void 0:C.critical))&&void 0!==v?v:l,nonCritical:null!==(b=o(null===(S=this.analysisFromWasm.vaporize)||void 0===S?void 0:S.non_critical))&&void 0!==b?b:l,name:"蒸发"});return r}}},H=G,V=(0,M.Z)(H,K,U,!1,null,"3fac810b",null),j=V.exports,J=a(9552),q=a(7656),Y=a(7547),Q=a(5779),X=a(9740),tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"title"},[t._v("选择收藏夹")]),a("el-checkbox-group",{attrs:{min:1},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.directories,(function(e){return a("el-checkbox",{key:e.id,staticClass:"dir-item",attrs:{label:e.id,border:""}},[t._v(t._s(e.title))])})),1),a("p",{staticClass:"title"},[t._v("名称")]),a("el-input",{attrs:{placeholder:"输入名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("div",{staticClass:"buttons",staticStyle:{"text-align":"right","margin-top":"32px"}},[a("el-button",{attrs:{type:"primary",disabled:""===t.name},on:{click:t.handleConfirm}},[t._v("确定")])],1)],1)},et=[],at={name:"SaveAsKumi",props:{defaultName:{type:String,default:""}},data(){return{name:this.defaultName,checkList:[0]}},watch:{defaultName(t){console.log(t),this.name=t}},methods:{getCheckedDirIds(){const t=this.$refs["checkbox"];if(!t)return[];let e=new Set;for(let a of t)a.isChecked&&e.add(a.$attrs["x-id"]);return Array.from(e)},handleConfirm(){const t=this.checkList;this.$emit("confirm",{dirIds:t,name:this.name})}},computed:(0,s.Z)({},(0,r.mapGetters)("kumi",["directories","dirNames"]))},it=at,nt=(0,M.Z)(it,tt,et,!1,null,"061549c3",null),st=nt.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{attrs:{data:t.tableDataForElementUI,size:"small"}},[a("el-table-column",{attrs:{prop:"chs",label:"类型"}}),a("el-table-column",{attrs:{label:"伤害"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return["感电"===i.chs?a("span",{staticStyle:{color:"#c250ff"}},[t._v(t._s(i.value.toFixed(1)))]):"超载"===i.chs?a("span",{staticStyle:{color:"#ff335a"}},[t._v(t._s(i.value.toFixed(1)))]):a("span",[t._v(t._s(i.value.toFixed(1)))])]}}])})],1)},lt=[],ot={name:"TransformativeDamage",props:["data"],computed:{tableDataForElementUI(){let t=[];return t.push({chs:"感电",value:this.data.electro_charged}),t.push({chs:"超载",value:this.data.overload}),t.push({chs:"碎冰",value:this.data.shatter}),t.push({chs:"超导",value:this.data.superconduct}),t.push({chs:"扩散（雷）",value:this.data.swirl_electro}),t.push({chs:"扩散（火）",value:this.data.swirl_pyro}),t.push({chs:"扩散（冰）",value:this.data.swirl_cryo}),t.push({chs:"扩散（水）",value:this.data.swirl_hydro}),t}}},ct=ot,ut=(0,M.Z)(ct,rt,lt,!1,null,"49a7c62b",null),ft=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{staticClass:"back",style:t.styleForBack}),a("span",{staticClass:"display"},[t._v(t._s((100*t.value).toFixed(1))+" "),t.extra?a("span",[t._v("/ "+t._s(t.extra))]):t._e()])])},ht=[],dt={name:"ValueDisplay",props:{value:{},extra:{default:""}},computed:{styleForBack(){return{width:100*this.value+"%"}}}},pt=dt,gt=(0,M.Z)(pt,mt,ht,!1,null,"6353f308",null),vt=gt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("等级")]),a("el-input-number",{attrs:{value:t.value.level,min:60,max:100,size:"small"},on:{input:function(e){return t.handleInput("level",e)}}})],1),t._l(t.resNames,(function(e){return a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v(t._s(e.title))]),a("el-slider",{staticClass:"input",attrs:{value:t.value[e.name],min:-1,max:1,step:.1,"show-input":!0},on:{input:function(a){return t.handleInput(e.name,a)}}})],1)}))],2)},bt=[];const St=[{name:"electro_res",title:"雷抗"},{name:"pyro_res",title:"火抗"},{name:"hydro_res",title:"水抗"},{name:"cryo_res",title:"冰抗"},{name:"geo_res",title:"岩抗"},{name:"anemo_res",title:"风抗"},{name:"dendro_res",title:"草抗"},{name:"physical_res",title:"物抗"}];Object.freeze(St);var kt={name:"EnemyConfig",props:["value"],created(){this.resNames=St},methods:{handleInput(t,e){let a=Object.assign({},this.value);a[t]=e,this.$emit("input",a)}}},yt=kt,_t=(0,M.Z)(yt,Ct,bt,!1,null,"fee65528",null),wt=_t.exports,xt=a(7349),At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticStyle:{"margin-bottom":"16px"},attrs:{size:"medium",placeholder:"搜索",clearable:""},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}},[a("template",{slot:"append"},[a("i",{staticClass:"el-icon-search"})])],2),a("div",{staticClass:"config-items mona-scroll"},t._l(t.dataSearched,(function(e){return a("div",{key:e.name,staticClass:"item"},[a("div",{staticClass:"top"},[a("img",{staticClass:"image",attrs:{src:e.thumbnail}}),a("div",[a("h3",{staticClass:"artifact-title"},[t._v(t._s(e.chs))]),a("p",{staticStyle:{"font-size":"12px"}},[a("span",{staticClass:"effect-title"},[t._v("四件套：")]),a("span",[t._v(t._s(e.effect4))])])])]),a("item-config",{attrs:{value:t.value[e.snake],configs:e.config4,"need-item-name":!1},on:{input:function(a){return t.handleChangeValue(e.snake,a)}}})],1)})),0)],1)},It=[],Nt=(a(4916),a(1289)),Ft=a.n(Nt),Dt={name:"ArtifactConfig",components:{ItemConfig:Y.Z},props:["value"],data(){return{searchString:""}},computed:{data(){let t=[];for(let a in g.oN){var e;const i=g.oN[a],n=null!==(e=i.config4)&&void 0!==e?e:[],s=i.name2;n.length>0&&t.push({name:s,snake:"config_"+(0,u.D1)(s),config4:n,effect4:i.effect4,thumbnail:(0,o.dd)(a),chs:i.chs})}return t},dataSearched(){if(""===this.searchString)return this.data;{const t=new(Ft())(this.data,{keys:["chs","effect4"]}),e=t.search(this.searchString);return e.map((t=>t.item))}}},methods:{handleChangeValue(t,e){let a=(0,u.p$)(this.value);a[t]=e,this.$emit("input",a)}}},Mt=Dt,$t=(0,M.Z)(Mt,At,It,!1,null,"90244e02",null),Pt=$t.exports,zt={name:"NewArtifactPlanPage",components:{SelectArtifactMainStat:xt.Z,SelectArtifact:k.Z,SelectArtifactSet:y.Z,SelectCharacter:_.Z,SelectCharacterLevel:w.Z,SelectCharacterSkill:L,SelectWeapon:x.Z,SelectWeaponLevel:A.Z,SelectTargetFunction:P,SelectBuff:O.Z,ArtifactDisplay:W.Z,AddButton:R.Z,DamagePanel:j,MyButton1:J.Z,DamageAnalysis:()=>a.e(771).then(a.bind(a,771)),AttributePanel:q.Z,ItemConfig:Y.Z,BuffItem:Q.Z,WeaponDisplay:X.Z,ArtifactsSetStatistics:()=>a.e(961).then(a.bind(a,1961)),ArtifactPerStatBonus:()=>a.e(630).then(a.bind(a,8630)),SaveAsKumi:st,TransformativeDamage:ft,ValueDisplay:vt,EnemyConfig:wt,ArtifactConfig:Pt},created(){},data(){return{deviceIsPC:S.B,characterName:"Amber",characterLevel:"90",characterConfig:"NoConfig",characterSkillConfig:"NoConfig",characterSkillIndex:0,characterSkill1:8,characterSkill2:8,characterSkill3:8,characterConstellation:0,weaponName:"PolarStar",weaponLevel:"90",weaponRefine:1,weaponConfig:{PolarStar:{stack:1}},constraintArtifactSet:[],constraintSandMainStats:[],constraintGobletMainStats:[],constraintHeadMainStats:[],algorithm:"AStar",constraintMinRecharge:1,constraintMinElementalMastery:0,constraintMinCritical:0,constraintMinCriticalDamage:0,enemyConfig:{level:90,electro_res:.1,pyro_res:.1,hydro_res:.1,cryo_res:.1,geo_res:.1,anemo_res:.1,dendro_res:.1,physical_res:.1},buffs:[],targetFunctionName:"AmberDefault",targetFunctionConfig:"NoConfig",targetFunctionUseDSL:!1,targetFunctionDSLSource:"",optimizationResults:[],optimizationResultIndex:0,artifactIds:[-1,-1,-1,-1,-1],artifactSingleConfig:null,artifactConfig:(0,o.s)(),artifactEffectMode:"auto",selectArtifactSlot:"any",showSelectArtifactDialog:!1,showDamageAnalysisDialog:!1,showSelectBuffDialog:!1,showConstraintDialog:!1,showArtifactAnalysisDialog:!1,showArtifactPerBonusDialog:!1,showSaveKumiDialog:!1,showUseKumiDialog:!1,showEnemyConfigDialog:!1,showConfigArtifactDialog:!1,miscPerStatBonus:{},miscCurrentPresetName:null,miscTargetFunctionTab:"normal"}},computed:(0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},(0,r.mapGetters)({artifactsById:"artifacts/artifactsById",allArtifactsFlat:"artifacts/allFlat"})),(0,r.mapGetters)("kumi",{kumiTreeDataForElementUI:"treeDataForElementUI"})),(0,r.mapGetters)("presets",{presetsAllFlat:"allFlat"})),{},{enemyInterface(){return this.enemyConfig},kumiDefaultName(){let t=m.O[this.characterName].chs;for(const e in this.artifactSetCount)this.artifactSetCount[e]>=2&&(t+="-"+g.oN[e].chs);return t},presetDefaultName(){const t=m.O[this.characterName].chs,e=h.G[this.weaponName].chs;return`${t}-${e}`},characterLevelNumber(){return parseInt(this.characterLevel)},characterAscend(){return this.characterLevel.includes("+")},characterSplash(){const t=m.O[this.characterName];return t.splash},characterNeedConfig(){let t=m.O[this.characterName].config;return t&&t.length>0},characterConfigConfig(){return m.O[this.characterName].config},characterNeedSkillConfig(){let t=m.O[this.characterName].configSkill;return t&&t.length>0},characterSkillConfigConfig(){return m.O[this.characterName].configSkill},characterWeaponType(){const t=m.O[this.characterName];return t?t.weapon:"Bow"},characterInterface(){let t={name:this.characterName,level:this.characterLevelNumber,ascend:this.characterAscend,constellation:this.characterConstellation,skill1:this.characterSkill1-1,skill2:this.characterSkill2-1,skill3:this.characterSkill3-1,params:this.characterConfig};return t},characterSkillInterface(){return{index:this.characterSkillIndex,config:this.characterSkillConfig}},characterDamageAnalysis(){const t=this.$mona.CalculatorInterface.get_damage_analysis(this.damageAnalysisWasmInterface);return t},characterTransformativeDamage(){return this.$mona.CalculatorInterface.get_transformative_damage(this.damageAnalysisWasmInterface)},weaponLevelNumber(){return parseInt(this.weaponLevel)},weaponAscend(){return this.weaponLevel.includes("+")},weaponSplash(){var t,e;const a=h.G[this.weaponName];return null!==(t=null!==(e=a.gacha)&&void 0!==e?e:a.url)&&void 0!==t?t:a.tn},weaponNeedConfig(){return!!h.G[this.weaponName].configs},weaponConfigConfig(){return h.G[this.weaponName].configs},weaponInterface(){return{name:this.weaponName,level:this.weaponLevelNumber,ascend:this.weaponAscend,refine:this.weaponRefine,params:this.weaponConfig}},targetFunctionBadge(){return d.F[this.targetFunctionName].badge},targetFunctionDescription(){return d.F[this.targetFunctionName].description},targetFunctionInterface(){const t="dsl"===this.miscTargetFunctionTab;return{name:this.targetFunctionName,params:this.targetFunctionConfig,use_dsl:t,dsl_source:t?this.targetFunctionDSLSource:""}},targetFunctionNeedConfig(){const t=d.F[this.targetFunctionName].config;return t&&t.length>0},targetFunctionConfigConfig(){return d.F[this.targetFunctionName].config},artifactItems(){let t=[];for(let e of this.artifactIds)this.artifactsById[e]?t.push(this.artifactsById[e]):t.push(null);return t},artifactWasmFormat(){let t=[];for(let e of this.artifactIds)if(-1!==e){const a=this.$store.getters["artifacts/artifactsById"][e];if(a&&!a.omit){const e=(0,l.Lz)(a);t.push(e)}}return t},artifactSetCount(){let t={};for(let e of this.artifactItems){if(!e)continue;const a=e.setName;Object.prototype.hasOwnProperty.call(t,a)||(t[a]=0),t[a]+=1}return t},artifactNeedConfig4(){for(let t in this.artifactSetCount){const e=this.artifactSetCount[t];if(e>=4){const e=g.oN[t];if(e.config4&&e.config4.length>0)return t}}return null},artifactConfig4ItemName(){const t=(0,l.aA)(this.artifactNeedConfig4);return`config_${(0,u.D1)(t)}`},artifactEffect4Text(){if(!this.artifactNeedConfig4)return"";const t=g.oN[this.artifactNeedConfig4];return t.effect4},artifactConfig4Configs(){if(this.artifactNeedConfig4){const t=g.oN[this.artifactNeedConfig4];return t.config4}return[]},artifactConfigForCalculator(){let t=(0,o.s)();if(this.artifactNeedConfig4){let e=this.artifactConfig4ItemName;t[e]=this.artifactSingleConfig[e]}return t},constraintSetMode(){const t=this.constraintArtifactSet.map((t=>(0,l.aA)(t))),e=t.length;return 2===e?{Set22:t}:1===e?{Set4:t[0]}:"Any"},constraintInterface(){let t={set_mode:this.constraintSetMode,hp_min:null,atk_min:null,def_min:null,recharge_min:this.constraintMinRecharge,em_min:this.constraintMinElementalMastery,crit_min:this.constraintMinCritical,crit_dmg_min:this.constraintMinCriticalDamage};return t},damageAnalysisWasmInterface(){return{character:this.characterInterface,weapon:this.weaponInterface,buffs:this.buffsInterface,artifacts:this.artifactWasmFormat,artifact_config:this.artifactConfigForCalculator,skill:this.characterSkillInterface,enemy:this.enemyInterface}},getAttributeWasmInterface(){return{character:this.characterInterface,weapon:this.weaponInterface,buffs:this.buffsInterface,artifacts:this.artifactWasmFormat,artifact_config:this.artifactConfigForCalculator}},attributeFromWasm(){return this.$mona.CommonInterface.get_attribute(this.getAttributeWasmInterface)},bonusPerStatWasmInterface(){return{character:this.characterInterface,weapon:this.weaponInterface,artifacts:this.artifactWasmFormat,tf:this.targetFunctionInterface,buffs:this.buffsInterface,artifacts_config:this.artifactConfigForCalculator}},buffsUnlocked(){return this.buffs.filter((t=>!t.lock))},buffsInterface(){let t=[];for(let e of this.buffsUnlocked)t.push({name:e.name,config:e.config});return t}}),methods:{handleClickArtifactConfig(){this.showConfigArtifactDialog=!0},handleClickEnemyConfig(){this.showEnemyConfigDialog=!0},handleClickSetupOptimization(){this.showConstraintDialog=!0},usePreset(t){var e,a,i,n;const s=(0,f.kE)(t),r=(0,u.p$)(s.item);if(!r)return;for(let o of r.buffs){var l;o.id=null!==(l=o.id)&&void 0!==l?l:Math.floor(1e9*Math.random())}this.buffs=null!==(e=r.buffs)&&void 0!==e?e:[];const c=r.character;var m;c&&(this.characterName=c.name,this.characterLevel=c.level.toString()+(c.ascend?"+":"-"),this.characterConstellation=null!==(m=c.constellation)&&void 0!==m?m:0,this.characterSkill1=c.skill1+1,this.characterSkill2=c.skill2+1,this.characterSkill3=c.skill3+1,this.$nextTick((()=>{this.characterConfig=c.params;const t=r.weapon;t&&(this.weaponName=t.name,this.weaponLevel=t.level.toString()+(t.ascend?"+":"-"),this.weaponRefine=t.refine,this.$nextTick((()=>{this.weaponConfig=t.params})))})));const h=r.targetFunction;h&&(this.targetFunctionName=h.name,this.$nextTick((()=>{this.targetFunctionConfig=h.params})));const d=r.constraint;var p;d&&(this.constraintArtifactSet=null!==(p=d.setNames)&&void 0!==p?p:[],this.constraintMinCriticalDamage=0,this.constraintMinCritical=0,this.constraintMinElementalMastery=0,this.constraintMinRecharge=1);const g=r.filter;var v,C,b;g&&(this.constraintSandMainStats=null!==(v=g.sandMainStats)&&void 0!==v?v:[],this.constraintGobletMainStats=null!==(C=g.gobletMainStats)&&void 0!==C?C:[],this.constraintHeadMainStats=null!==(b=g.headMainStats)&&void 0!==b?b:[]);this.algorithm=null!==(a=r.algorithm)&&void 0!==a?a:"AStar",this.artifactEffectMode=null!==(i=r.artifactEffectMode)&&void 0!==i?i:"auto",this.artifactConfig=null!==(n=r.artifactConfig)&&void 0!==n?n:(0,o.s)()},handleCommandPreset(t){if("save-preset"===t)this.handleClickSaveOptimizeConfig();else if(t.startsWith("apply-")){const e=t.slice(6);this.usePreset(e),this.miscCurrentPresetName=e}},handleSavePreset(t){if(t){const e=this.getPresetItem();(0,f.y0)(e,t),this.$message.success("已保存")}else this.handleClickSaveOptimizeConfig()},getPresetItem(){const t=this.getOptimizeArtifactWasmInterface(),e={buffs:(0,u.p$)(t.buffs),character:(0,u.p$)(t.character),weapon:(0,u.p$)(t.weapon),targetFunction:(0,u.p$)(t.target_function),constraint:{setNames:(0,u.p$)(this.constraintArtifactSet),minRecharge:this.constraintMinRecharge,minCritical:this.constraintMinCritical,minCriticalDamage:this.constraintMinCriticalDamage,minElementalMastery:this.constraintMinElementalMastery},filter:{sandMainStats:(0,u.p$)(this.constraintSandMainStats),gobletMainStats:(0,u.p$)(this.constraintGobletMainStats),headMainStats:(0,u.p$)(this.constraintHeadMainStats)},artifactConfig:(0,u.p$)(this.artifactConfig),algorithm:this.algorithm,artifactEffectMode:this.artifactEffectMode};return e},handleClickSaveOptimizeConfig(){const t=this.getPresetItem();this.$prompt("输入名称（重复名称将覆盖）","存为预设",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[^\s]+$/,inputValue:this.presetDefaultName}).then((({value:e})=>{t.name=e,(0,f.y0)(t,e),this.miscCurrentPresetName=e,this.$message.success("保存成功")}))},handleClickSaveAsKumi(){this.showSaveKumiDialog=!0},handleSaveAsKumi({dirIds:t,name:e}){let a=this.artifactIds.filter((t=>t));for(let i of t)(0,c.GV)(i,e,a);this.showSaveKumiDialog=!1},handleClickUseKumi(){this.showUseKumiDialog=!0},handleUseKumi(t){if(Object.prototype.hasOwnProperty.call(t,"kumiId")){var e,a,i,n,s;const r=t.kumiId;this.showUseKumiDialog=!1;const l=(0,c.wJ)(r);let o={};for(let t of l){const e=this.artifactsById[t];e&&(o[e.position]=t)}let u=[];u.push(null!==(e=o.flower)&&void 0!==e?e:null),u.push(null!==(a=o.feather)&&void 0!==a?a:null),u.push(null!==(i=o.sand)&&void 0!==i?i:null),u.push(null!==(n=o.cup)&&void 0!==n?n:null),u.push(null!==(s=o.head)&&void 0!==s?s:null),this.artifactIds=u}},getAllArtifactsFiltered(){const t=this.$refs["filterKumiRef"];let e=new Set;if(t){const a=t.getCheckedNodes(!0);for(let t of a){const a=t.kumiId,i=(0,c.wJ)(a);for(let t of i)e.add(t)}}for(let i of this.allArtifactsFlat){const t=i.position,a=i.mainTag.name,n=i.id;if("sand"===t){if(this.constraintSandMainStats.length>0){const t=this.constraintSandMainStats.indexOf(a);-1===t&&e.add(n)}}else if("cup"===t){if(this.constraintGobletMainStats.length>0){const t=this.constraintGobletMainStats.indexOf(a);-1===t&&e.add(n)}}else if("head"===t&&this.constraintHeadMainStats.length>0){const t=this.constraintHeadMainStats.indexOf(a);-1===t&&e.add(n)}}let a=[];for(let i of this.allArtifactsFlat)i.lock||e.has(i.id)||a.push(i);return a.filter((t=>!t.omit))},getAllArtifactsFilteredWasm(){return this.getAllArtifactsFiltered().map((t=>(0,l.Lz)(t)))},getOptimizeArtifactWasmInterface(){let t=null;return"custom"===this.artifactEffectMode&&(t=this.artifactConfig),{character:this.characterInterface,weapon:this.weaponInterface,target_function:this.targetFunctionInterface,constraint:this.constraintInterface,buffs:this.buffsInterface,artifact_config:t,algorithm:this.algorithm}},getArtifactsToBeCalculated(){const t=this.getAllArtifactsFilteredWasm(),e=t.filter((t=>t.level>=16));return e},handleClickArtifactAnalysis(){this.showArtifactAnalysisDialog=!0},handleOptimizeArtifact(){const t=new Date,e=this.$loading({lock:!0,text:"莫娜占卜中"});(0,C.Y)(this.getOptimizeArtifactWasmInterface(),this.getArtifactsToBeCalculated()).then((e=>{const a=new Date;if(console.log(`time: ${(a-t)/1e3}s`),0!==e.length){if(this.optimizationResults=e,this.handleUseNthOptimizationResult(1),this.$store.getters["artifacts/twentyCount"]>=100){const t=this.characterInterface,a=this.weaponInterface,i=this.buffsInterface,n=this.targetFunctionInterface;let s=[],r=e[0];s.push(r.flower),s.push(r.feather),s.push(r.sand),s.push(r.goblet),s.push(r.head),s=s.filter((t=>null!==t&&void 0!==t)).map((t=>this.artifactsById[t])).filter((t=>!!t)).map((t=>(0,l.Lz)(t))),(0,b.Cm)(t,a,i,n,s)}}else this.$message.error("没有符合条件的圣遗物")})).catch((t=>{this.$message.error(t)})).finally((()=>{e.close()}))},handleUseNthOptimizationResult(t){const e=this.optimizationResults[t-1],a=t=>null!==t?t:-1;let i=[];i.push(a(e.flower)),i.push(a(e.feather)),i.push(a(e.sand)),i.push(a(e.goblet)),i.push(a(e.head)),this.artifactIds=i,this.optimizationResultIndex=t},handleChangeCharacter(t){this.characterName=t},handleGotoSelectArtifact(t){const e=["flower","feather","sand","cup","head"],a=e[t];this.showSelectArtifactDialog=!0,this.selectArtifactSlot=a},handleSelectArtifact(t){const e={flower:0,feather:1,sand:2,cup:3,head:4},a=e[this.selectArtifactSlot];this.$set(this.artifactIds,a,t),this.showSelectArtifactDialog=!1},handleRemoveArtifact(t){this.$set(this.artifactIds,t,-1)},handleToggleArtifact(t){this.$store.commit("artifacts/toggleById",{id:t})},handleDisplayAnalysis(){this.showDamageAnalysisDialog=!0,this.$nextTick((()=>{const t=this.$refs["damageAnalysis"];t.setValue(this.characterDamageAnalysis)}))},handleClickAttributeAnalysis(){(0,v.Ax)(this.bonusPerStatWasmInterface).then((t=>{this.miscPerStatBonus=t,this.showArtifactPerBonusDialog=!0}))},handleClickAddBuff(){this.showSelectBuffDialog=!0},handleSelectBuff(t){this.showSelectBuffDialog=!1,this.addBuff(t)},handleClickDeleteBuff(t){const e=this.buffs.findIndex((e=>e.id===t));this.$delete(this.buffs,e)},handleClickToggleBuff(t){const e=this.buffs.findIndex((e=>e.id===t)),a=this.buffs[e].lock;this.$set(this.buffs[e],"lock",!a)},addBuff(t){const e=p.JK[t];let a,i={};for(let n of e.config)i[n.name]=n.default;a=0===e.config.length?"NoConfig":{[t]:i},this.buffs.push({name:t,config:a,id:Math.floor(1e9*Math.random()),lock:!1})}},watch:{weaponName(t){var e;const a=!(null===(e=h.G[t])||void 0===e||!e.configs);if(a){const e=h.G[t].configs;let a={};for(let t of e)a[t.name]=t.default;this.weaponConfig={[t]:a}}else this.weaponConfig="NoConfig"},characterName(t){const e=m.O[t].config.length>0,a=m.O[t].configSkill.length>0;if(e){const e=m.O[t].config;let a={};for(let t of e)a[t.name]=t.default;this.characterConfig={[t]:a}}else this.characterConfig="NoConfig";if(a){let e={};for(let a of m.O[t].configSkill)e[a.name]=a.default;this.characterSkillConfig={[t]:e}}else this.characterSkillConfig="NoConfig";this.characterSkillIndex=0},targetFunctionName(t){const e=d.F[t].config.length>0;if(e){let e={};for(let a of d.F[t].config)e[a.name]=a.default;this.targetFunctionConfig={[t]:e}}else this.targetFunctionConfig="NoConfig"},artifactNeedConfig4(t){if(t){const e=g.oN[t];let a={};for(let t of e.config4)a[t.name]=t.default;const i=(0,l.aA)(t),n=`config_${(0,u.D1)(i)}`;this.artifactSingleConfig={[n]:a}}else this.artifactSingleConfig=null}}},Bt=zt,Et=(0,M.Z)(Bt,i,n,!1,null,"4629510c",null),Tt=Et.exports},1817:function(t,e,a){var i=a(2109),n=a(9781),s=a(7854),r=a(1702),l=a(2597),o=a(614),c=a(7976),u=a(1340),f=a(3070).f,m=a(9920),h=s.Symbol,d=h&&h.prototype;if(n&&o(h)&&(!("description"in d)||void 0!==h().description)){var p={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=c(d,this)?new h(t):void 0===t?h():h(t);return""===t&&(p[e]=!0),e};m(g,h),g.prototype=d,d.constructor=g;var v="Symbol(test)"==String(h("test")),C=r(d.toString),b=r(d.valueOf),S=/^Symbol\((.*)\)[^)]+$/,k=r("".replace),y=r("".slice);f(d,"description",{configurable:!0,get:function(){var t=b(this),e=C(t);if(l(p,t))return"";var a=v?y(e,7,-1):k(e,S,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:g})}},7656:function(t,e,a){a.d(e,{Z:function(){return k}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"class"},[t._v("基础属性")]),a("attribute-item",{attrs:{title:"生命值",composition:t.attribute.hp}}),a("attribute-item",{attrs:{title:"攻击力",composition:t.attribute.atk}}),a("attribute-item",{attrs:{title:"防御力",composition:t.attribute.def}}),a("attribute-item",{attrs:{title:"元素精通",composition:t.attribute.elemental_mastery}}),a("h3",{staticClass:"class"},[t._v("进阶属性")]),a("attribute-item",{attrs:{title:"暴击率",composition:t.attribute.critical,percentage:!0}}),a("attribute-item",{attrs:{title:"暴击伤害",composition:t.attribute.critical_damage,percentage:!0}}),a("attribute-item",{attrs:{title:"治疗加成",composition:t.attribute.healing_bonus,percentage:!0}}),a("attribute-item",{attrs:{title:"元素充能效率",composition:t.attribute.recharge,percentage:!0}}),a("attribute-item",{attrs:{title:"护盾强效",composition:t.attribute.shield_strength,percentage:!0}}),a("h3",{staticClass:"class"},[t._v("元素属性")]),a("attribute-item",{attrs:{title:"火元素伤害加成",composition:t.attribute.bonus_pyro,percentage:!0}}),a("attribute-item",{attrs:{title:"水元素伤害加成",composition:t.attribute.bonus_hydro,percentage:!0}}),a("attribute-item",{attrs:{title:"草元素伤害加成",composition:t.attribute.bonus_dendro,percentage:!0}}),a("attribute-item",{attrs:{title:"雷元素伤害加成",composition:t.attribute.bonus_electro,percentage:!0}}),a("attribute-item",{attrs:{title:"风元素伤害加成",composition:t.attribute.bonus_anemo,percentage:!0}}),a("attribute-item",{attrs:{title:"冰元素伤害加成",composition:t.attribute.bonus_cryo,percentage:!0}}),a("attribute-item",{attrs:{title:"岩元素伤害加成",composition:t.attribute.bonus_geo,percentage:!0}}),a("attribute-item",{attrs:{title:"物理伤害加成",composition:t.attribute.bonus_physical,percentage:!0}})],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attribute-item"},[a("el-tooltip",[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),a("div",{attrs:{slot:"content"},slot:"content"},[a("attribute-composition",{attrs:{composition:t.composition}})],1)]),a("span",{staticClass:"value"},[t._v(t._s(t.displayValue))])],1)},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.list.length>0?t._l(t.list,(function(e){return a("div",{key:e.name,staticClass:"item"},[a("span",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.value.toFixed(3)))])])})):a("div",{staticClass:"no-item",staticStyle:{padding:"8px"}},[t._v(" 无加成 ")])],2)},o=[],c=(a(2707),{name:"AttributeComposition",props:["composition"],computed:{list(){let t=[];for(const e in this.composition)t.push({name:e,value:this.composition[e]});return t.sort(((t,e)=>t.name.localeCompare(e.name))),t}}}),u=c,f=a(1001),m=(0,f.Z)(u,l,o,!1,null,"a1776db8",null),h=m.exports,d={name:"AttributeItem",components:{AttributeComposition:h},props:{composition:{},title:{},percentage:{default:!1}},computed:{sum(){let t=0;for(const e in this.composition)t+=this.composition[e];return t},displayValue(){return this.percentage?`${(100*this.sum).toFixed(1)}%`:Math.round(this.sum)}}},p=d,g=(0,f.Z)(p,s,r,!1,null,"4722bde2",null),v=g.exports,C={name:"AttributePanel",components:{AttributeItem:v},props:{attribute:{type:Object}},methods:{mul100(t){return(100*this.attribute[t]).toFixed(1)+"%"}},computed:{attack(){let t=this.attribute;return t.attackStatic+t.attackBasic+t.attackPercentage},defend(){let t=this.attribute;return t.defendStatic+t.defendBasic+t.defendPercentage},life(){let t=this.attribute;return t.lifeStatic+t.lifeBasic+t.lifePercentage}}},b=C,S=(0,f.Z)(b,i,n,!1,null,"5afce8a2",null),k=S.exports},2432:function(t,e,a){a.d(e,{jq:function(){return l},ym:function(){return o},j8:function(){return c},O5:function(){return u},Ee:function(){return f},GV:function(){return m},At:function(){return h},UE:function(){return d},P$:function(){return p},JN:function(){return v},fF:function(){return C},wJ:function(){return b}});a(3948);var i=a(7619);function n(){let t=i.Z.getters["kumi/dirNames"];for(let e=0;e<100;e++){const a=`收藏夹${e}`;if(!t.has(a))return a}return`收藏夹${Math.floor(1e5*Math.random())}`}function s(t){const e=c(t);let a=new Set;for(let i of e)a.add(i.title);return a}function r(t){let e=s(t);for(let a=0;a<100;a++){const t=`圣遗物组${a}`;if(!e.has(t))return t}return`圣遗物组${Math.floor(1e5*Math.random())}`}function l(t){const e=null!==t&&void 0!==t?t:n();i.Z.commit("kumi/newDir",{name:e})}function o(t){if(""===t||!t)return{error:!0,reason:"名称为空"};const e=i.Z.getters["kumi/dirNames"];return e.has(t)?{error:!0,reason:"名称已存在"}:{error:!1}}function c(t){const e=i.Z.getters["kumi/kumiByDir"][t];if(!e)return[];const a=i.Z.state.kumi.kumi;let n=[];for(let i of e)n.push(a[i]);return n}function u(t,e){if(""===e||!e)return{error:!0,reason:"名称为空"};let a=s(t);return a.has(e)?{error:!0,reason:"名称已存在"}:{error:!1}}function f(t,e){const a=null!==e&&void 0!==e?e:r(t);i.Z.commit("kumi/newKumi",{artifactIds:[],title:a,dirId:t})}function m(t,e,a){i.Z.commit("kumi/newKumi",{artifactIds:a,title:e,dirId:t})}function h(t){i.Z.commit("kumi/deleteKumi",{id:t})}function d(t,e){i.Z.commit("kumi/renameItem",{id:t,name:e})}function p(t){i.Z.commit("kumi/deleteDir",{id:t})}function g(t){return i.Z.state.kumi.kumi[t]}function v(t,e){var a;const n=i.Z.getters["artifacts/artifactsById"],s=n[e];if(!s)return;const r=s.position;let l=[e];const o=g(t);if(!o)return;const c=null!==(a=o.artifactIds)&&void 0!==a?a:[];for(let i of c){const t=n[i];t&&t.position===r||l.push(i)}i.Z.commit("kumi/updateKumiArtifact",{artifactIds:l,kumiId:t})}function C(t,e){var a;const n=g(t);if(!n)return;let s=null!==(a=n.artifactIds)&&void 0!==a?a:[],r=s.indexOf(e);-1!==r&&s.splice(r,1),i.Z.commit("kumi/updateKumiArtifact",{artifactIds:s,kumiId:t})}function b(t){var e;const a=g(t);if(!a)return[];let i=null!==(e=a.artifactIds)&&void 0!==e?e:[],n=new Set;for(let s of i)n.add(s);return n}}}]);